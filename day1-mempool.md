# 트랜잭션들이 블록에 담기기 전 트랜잭션들은 어디에 저장되어 있을까?

작성자: 김현진

## 0. 들어가기 앞서

### **트랜잭션이란?**

- 정의 : 지정된 금액에 대한 소유권을 한 개인으로부터 다른 개인으로 이전하기 위한 목적으로 서명된 정보
    - 송금자의 미사용 비트코인, 송금 정보(트랜잭션 ID 또는 트랜잭션 해시로 표시), 송금액, 수령자의 공개 주소 등 모든 정보를 기록
- 트랜잭션의 이동 : 유효성 검증  > 정보 블록에 추가 > 다른 블록에 연결 = 블록 체인
    
    1) 트랜잭션은 유효성 검증을 위해 비트코인 네트워크로 브로드캐스팅
    
    2) 검증을 통과하게 되면 송금을 위해 블록체인이라고 불리는 온라인 원장으로 이동
    
    3) 검증된 트랜잭션은 정보 블록에 추가되고, 해당 블록은 다른 블록에 연결되어 블록 체인이 만들어짐
    

### **블록이란?**

- 정의 : 다수의 트랜잭션을 모아서 하나로 관리하기 위한 묶음
    - 예 ) 비트코인의 경우 10분간 진행된 약 2,000건의 거래내역을 하나의 블록으로 묶어서 관리
    - 채굴 행위를 통해 약 10분마다 한개씩 발행
    - 거래 내역, 논스, 이전 블록의 해시값, 난이도를 포함하고 있음
    

## 1. 비트코인 유저가 할 수 있는 행동들

### 행동 1. 채굴

- 채굴 : 사용자들이 비트코인을 발행하기 위해 직접 작업증명을 통해 해시값을 찾는 과정
    - 작업증명 (**PoW**, Proof of Work)
        
        목표값 이하의 해시를 찾는 과정을 반복함으로써 해당 작업에 참여했음을 증명하는 방식의 합의 알고리즘
        
- 이때, 작업증명 과정에서 해당 트랜잭션이 유효한 트랜잭션인지에 대한 합의 방법 및 새로운 블록이 진짜인지, 가짜인지에 대한 검증을 수행
- 채굴에 참여하는 모든 사용자가 목표값을 찾기 위한 경쟁을 벌이며, 특정한 사용자가 목표값에 해당하는 해시값을 찾는 데 성공하면 블록을 발행
- 이들은 블록을 발행하고 이를 네트워크에 전파
- 동시에 블록 발행 보상인 **‘비트코인’**과 해당 블록 안에 포함된 **‘이체 수수료’**를 받음

### 행동 2. 거래 (= 새로운 트랜잭션 생성)

- 특정 비트코인의 소유를 한 개인으로부터 다른 개인으로 이전
- 비트코인 거래시 : 원본 데이터 + 전자 서명된 데이터를 함께 보냄
    
    → 전자 서명을 통해 해당 트랜잭션의 데이터 내용이 수정되었거나 올바른 메시지인지 검증
    
- 즉, 전자 서명된 데이터를 난독화 한 값 == 원본 데이터 인지 확인하는 과정

## 2. Mempool 이란?

### Mempool

- 정의 : 블록에 들어가지 않은 상태의 트랜잭션들을 모아둔 공간

**1) 트랜잭션이 Mempool로 어떻게 들어가?** 

- 거래를 위해 트랜잭션 생성
    
    → 비트코인 네트워크로 연결된 주변 노드(지갑)로 트랜잭션 전파
    
    → 노드에서 트랜잭션이 유효한지 검증
    
    → 검증 후 Mempool 에 등록 
    

**2) Mempool안에 있는 트랜잭션은 어떻게 돼?**

- 블록 체인은 약 10분의 주기로 만들어짐
- 블록체인이 만들어지며 → 블록에 들어가지 않은 상태의 트랜잭션을 블록에 담음 
→ Mempool 에서 가지고 와서 담음 → 트랜잭션 거래 성사 → Mempool에서 트랜잭션 삭제
    - 채굴 보상 = 블록 발행 보상 + 이체 수수료(=트랜잭션 거래 수수료)
        
        ⇒ 트랜잭션의 거래 수수료가 높은 순서대로 블록에 담기게 됨
        
- 트랜잭션이 블록체인에 올라가게 됨 → 트랜잭션은 1컨펌으로 변함

## 3. 정리

채굴자 ⛏️

- 채굴을 통해 해쉬값을 찾아냄
    
    → 새로운 블록을 등록
    
    → 블록 생성 시 Mempool에서 트랜잭션 담음
    
    → 블록 발행 보상 + 트랜잭션 거래 수수료 get
    

거래자 💰

- 거래를 위해 트랜잭션 등록
    
    → 주변 노드(지갑)로 전파
    
    → 노드에서 검증
    
    → 검증된 유효한 트랜잭션을 Mempool에 등록
